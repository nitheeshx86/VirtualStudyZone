<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Enhanced Study Tracker</title>
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Playfair+Display:wght@700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
    body {
        margin: 0;
        height: 100vh;
        background: url('background.png') center/cover no-repeat fixed;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        font-family: 'Roboto', sans-serif;
        overflow: hidden;
        color: white;
    }
    
    .container {
        position: absolute;
        inset: 0;
        pointer-events: none;
    }
    
    .card {
        backdrop-filter: blur(15px) saturate(120%);
        background: rgba(255, 255, 255, 0.15);
        border-radius: 10px;
        border: 1px solid rgba(0, 0, 0, 0);
        padding: 10px;
        box-shadow: 0 8px 32px rgba(0,0,0,0.25);
        pointer-events: auto;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 40px rgba(0,0,0,0.35);
    }
    
    #mainGoal {
        font-family: 'Dancing Script', cursive;
        font-size: 1.8rem;
        position: absolute;
        top: 20px;
        left: 20px;
        text-align: left;
        cursor: pointer;
        max-width: 300px;
    }
    
    #quote {
        font-family: 'Playfair Display', serif;
        position: absolute;
        top: 20px;
        right: 30px;
        max-width: 250px;
        font-size: 1rem;
        text-align: right;
    }
    
    /* Timer Carousel Box */
    #timerBox {
        position: absolute;
        bottom: 30px;
        left: 30px;
        width: 280px;
        text-align: center;
        overflow: hidden;
    }
    
    .timer-carousel {
        position: relative;
        height: 300px;
    }
    
    .timer-mode {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        transform: translateX(100%);
        transition: all 0.4s ease;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }
    
    .timer-mode.active {
        opacity: 1;
        transform: translateX(0);
    }
    
    .timer-ring {
        position: relative;
        width: 180px;
        height: 180px;
        margin-bottom: 20px;
    }
    
    .timer-ring svg {
        transform: rotate(-90deg);
        width: 180px;
        height: 180px;
    }
    
    .timer-ring-bg {
        fill: none;
        stroke: rgba(255, 255, 255, 0.2);
        stroke-width: 6;
    }
    
    .timer-ring-progress {
        fill: none;
        stroke: #4ade80;
        stroke-width: 6;
        stroke-linecap: round;
        stroke-dasharray: 508.9;
        stroke-dashoffset: 508.9;
        transition: stroke-dashoffset 0.5s ease;
    }
    
    .timer-display {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
    }
    
    .timer-title {
        font-size: 0.9rem;
        opacity: 0.8;
        margin-bottom: 10px;
    }
    
    .timer-time {
        font-size: 2rem;
        font-weight: bold;
        margin-bottom: 10px;
    }
    
    .mode-indicator {
        display: flex;
        justify-content: center;
        gap: 8px;
        margin-bottom: 15px;
    }
    
    .mode-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.3);
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .mode-dot.active {
        background: #4ade80;
        transform: scale(1.3);
    }
    
    /* Glass Icon Buttons */
    .glass-btn {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        backdrop-filter: blur(15px) saturate(120%);
        background: rgba(255, 255, 255, 0.15);
        border: 1px solid rgba(255, 255, 255, 0.3);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        box-shadow: 0 4px 16px rgba(0,0,0,0.2);
        margin: 0 10px;
    }
    
    .glass-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.3);
    }
    
    .glass-btn svg {
        width: 24px;
        height: 24px;
        fill: currentColor;
    }
    
    .timer-controls {
        display: flex;
        justify-content: center;
        margin-top: 20px;
        gap: 10px;
    }
    
    #todoCard {
        position: absolute;
        right: 30px;
        top: 120px;
        width: 280px;
    }
    

    
    /* Notes Button with Glow */
    #notesBtn {
        position: fixed;
        bottom: 30px;
        right: 30px;
        width: 60px;
        height: 60px;
        border-radius: 50%;
        backdrop-filter: blur(15px) saturate(120%);
        background: rgba(255, 255, 255, 0.15);
        border: 1px solid rgba(255, 255, 255, 0.3);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
        transition: all 0.3s ease;
        pointer-events: auto;
    }
    
    #notesBtn:hover {
        transform: translateY(-5px);
        box-shadow: 0 0 30px rgba(255, 255, 255, 0.5);
    }
    
    #notesModal {
        position: fixed;
        bottom: 100px;
        right: 30px;
        width: 350px;
        height: 450px;
        background: #fdf6e3;
        background-image: url("data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3cpattern id='lines' patternUnits='userSpaceOnUse' width='100%25' height='24'%3e%3cline x1='0' y1='24' x2='100%25' y2='24' stroke='%23d4af37' stroke-width='1' opacity='0.3'/%3e%3c/pattern%3e%3c/defs%3e%3crect width='100%25' height='100%25' fill='url(%23lines)'/%3e%3c/svg%3e");
        font-family: 'Dancing Script', cursive;
        font-size: 1.3rem;
        padding: 20px;
        border-radius: 15px;
        border: 2px solid #d4af37;
        box-shadow: 0 15px 35px rgba(0,0,0,0.3);
        display: none;
        resize: none;
        outline: none;
        line-height: 24px;
        color: #8b4513;
    }
    
    /* To-do List Styles */
    ul {
        list-style: none;
        padding: 0;
        margin: 10px 0;
    }
    
    li {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
        transition: opacity 0.3s ease;
        padding: 5px;
        border-radius: 8px;
    }
    
    li:hover {
        background: rgba(255, 255, 255, 0.1);
    }
    
    input[type="checkbox"] {
        appearance: none;
        width: 20px;
        height: 20px;
        border: 2px solid #4ade80;
        border-radius: 50%;
        margin-right: 12px;
        cursor: pointer;
        position: relative;
        transition: all 0.3s ease;
    }
    
    input[type="checkbox"]:checked {
        background-color: #4ade80;
        transform: scale(1.1);
    }
    
    input[type="checkbox"]:checked::after {
        content: 'âœ“';
        position: absolute;
        color: white;
        font-size: 14px;
        font-weight: bold;
        left: 3px;
        top: -1px;
    }
    
    .task-text {
        flex: 1;
        transition: all 0.3s ease;
    }
    
    .completed .task-text {
        text-decoration: line-through;
        opacity: 0.6;
    }
    
    #todoInput {
        width: 100%;
        padding: 10px;
        border: none;
        border-radius: 10px;
        background: rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(10px);
        margin-bottom: 10px;
        outline: none;
        font-family: inherit;
    }
    
    #todoInput::placeholder {
        opacity: 0.7;
    }
    
    .add-btn {
        width: 100%;
        padding: 10px;
        border: none;
        border-radius: 10px;
        background: rgba(74, 222, 128, 0.8);
        backdrop-filter: blur(10px);
        cursor: pointer;
        font-weight: bold;
        transition: all 0.3s ease;
    }
    
    .add-btn:hover {
        background: rgba(74, 222, 128, 1);
        transform: translateY(-2px);
    }
    
    #progressBar {
        width: 100%;
        height: 10px;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 5px;
        overflow: hidden;
        margin-top: 15px;
    }
    
    #progress {
        height: 100%;
        background: linear-gradient(90deg, #4ade80, #22c55e);
        width: 0%;
        transition: width 0.5s ease;
        border-radius: 5px;
    }
    
    .countdown-input {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
        justify-content: center;
    }
    
    .countdown-input input {
        width: 50px;
        padding: 8px;
        border: none;
        border-radius: 8px;
        background: rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(10px);
        text-align: center;
        outline: none;
        font-weight: bold;
    }
</style>
</head>
<body>
    <div id="mainGoal" class="card">What's your main goal for today?</div>
    <div id="quote" class="card">"Stay focused and never give up."</div>
    
    <div id="timerBox" class="card">
        <div class="mode-indicator">
            <div class="mode-dot active" onclick="switchMode(0)"></div>
            <div class="mode-dot" onclick="switchMode(1)"></div>
        </div>
        
        <div class="timer-carousel">
            <!-- Elapsed Timer Mode -->
            <div class="timer-mode active" id="elapsedMode">
                <div class="timer-ring">
                    <svg>
                        <circle class="timer-ring-bg" cx="90" cy="90" r="81"></circle>
                    </svg>
                    <div class="timer-display">
                        <div class="timer-title">Session Time</div>
                        <div id="elapsedDisplay" class="timer-time">00:00:00</div>
                    </div>
                </div>
            </div>
            
            <!-- Countdown Timer Mode -->
            <div class="timer-mode" id="countdownMode">
                <div class="timer-ring">
                    <svg>
                        <circle class="timer-ring-bg" cx="90" cy="90" r="81"></circle>
                        <circle id="progressRing" class="timer-ring-progress" cx="90" cy="90" r="81"></circle>
                    </svg>
                    <div class="timer-display">
                        <div class="timer-title">Focus Timer</div>
                        <div class="countdown-input">
                            <input type="number" id="minutesInput" placeholder="MM" min="0" max="59" value="25">
                            <span>:</span>
                            <input type="number" id="secondsInput" placeholder="SS" min="0" max="59" value="00">
                        </div>
                        <div id="countdownDisplay" class="timer-time">25:00</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="timer-controls">
            <button id="playPauseBtn" class="glass-btn" onclick="toggleCountdown()">
                <svg viewBox="0 0 24 24">
                    <path d="M8 5v14l11-7z"/>
                </svg>
            </button>
            <button id="stopBtn" class="glass-btn" onclick="stopSession()">
                <svg viewBox="0 0 24 24">
                    <rect x="6" y="6" width="12" height="12"/>
                </svg>
            </button>
        </div>
    </div>
    
    <div id="todoCard" class="card">
        <h3>To-Do List</h3>
        <ul id="todoList"></ul>
        <input type="text" id="todoInput" placeholder="Add new task...">
        <button class="add-btn" onclick="addTask()">Add Task</button>
        <div id="progressBar">
            <div id="progress"></div>
        </div>
    </div>
    
    <button id="notesBtn" onclick="toggleNotes()">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor">
            <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
        </svg>
    </button>
    
    <textarea id="notesModal" placeholder="Write your notes here...&#10;&#10;â€¢ Remember to take breaks&#10;â€¢ Stay hydrated&#10;â€¢ Keep focused on your goal"></textarea>

<script>
// Timer variables
let elapsedInterval, countdownInterval;
let elapsedSeconds = 0;
let countdownSeconds = 0;
let totalCountdownSeconds = 0;
let isElapsedRunning = false;
let isCountdownRunning = false;
let isPaused = false;
let currentMode = 0; // 0: elapsed, 1: countdown

// Mode switching
function switchMode(mode) {
    if (mode === currentMode) return;
    
    currentMode = mode;
    
    // Update mode indicators
    document.querySelectorAll('.mode-dot').forEach((dot, index) => {
        dot.classList.toggle('active', index === mode);
    });
    
    // Switch timer modes
    document.querySelectorAll('.timer-mode').forEach((modeEl, index) => {
        modeEl.classList.toggle('active', index === mode);
    });
}

// Start elapsed timer automatically
function startElapsedTimer() {
    if (!isElapsedRunning) {
        elapsedInterval = setInterval(() => {
            if (!isPaused) {
                elapsedSeconds++;
                updateElapsedDisplay();
            }
        }, 1000);
        isElapsedRunning = true;
    }
}

function updateElapsedDisplay() {
    const hours = Math.floor(elapsedSeconds / 3600);
    const minutes = Math.floor((elapsedSeconds % 3600) / 60);
    const seconds = elapsedSeconds % 60;
    document.getElementById('elapsedDisplay').textContent = 
        `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
}

function updateCountdownDisplay() {
    const minutes = Math.floor(countdownSeconds / 60);
    const seconds = countdownSeconds % 60;
    document.getElementById('countdownDisplay').textContent = 
        `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    
    // Update progress ring
    if (totalCountdownSeconds > 0) {
        const progress = (totalCountdownSeconds - countdownSeconds) / totalCountdownSeconds;
        const circumference = 2 * Math.PI * 81;
        const offset = circumference * (1 - progress);
        document.getElementById('progressRing').style.strokeDashoffset = offset;
    }
}

function toggleCountdown() {
    const playPauseBtn = document.getElementById('playPauseBtn');
    
    if (!isCountdownRunning && countdownSeconds === 0) {
        // Start new countdown
        const minutes = parseInt(document.getElementById('minutesInput').value) || 0;
        const seconds = parseInt(document.getElementById('secondsInput').value) || 0;
        countdownSeconds = minutes * 60 + seconds;
        totalCountdownSeconds = countdownSeconds;
        
        if (countdownSeconds === 0) {
            alert('Please set a valid countdown time!');
            return;
        }
    }
    
    if (isCountdownRunning) {
        // Pause countdown
        clearInterval(countdownInterval);
        isCountdownRunning = false;
        isPaused = true;
        playPauseBtn.innerHTML = '<svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>';
    } else {
        // Start/Resume countdown
        startElapsedTimer(); // Ensure elapsed timer is running
        isPaused = false;
        countdownInterval = setInterval(() => {
            if (!isPaused) {
                countdownSeconds--;
                updateCountdownDisplay();
                
                if (countdownSeconds <= 0) {
                    clearInterval(countdownInterval);
                    isCountdownRunning = false;
                    playPauseBtn.innerHTML = '<svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>';
                    alert('Time\'s up! ðŸŽ‰');
                    
                    // Reset for next session
                    const minutes = parseInt(document.getElementById('minutesInput').value) || 25;
                    const seconds = parseInt(document.getElementById('secondsInput').value) || 0;
                    countdownSeconds = 0;
                    totalCountdownSeconds = 0;
                    updateCountdownDisplay();
                }
            }
        }, 1000);
        isCountdownRunning = true;
        playPauseBtn.innerHTML = '<svg viewBox="0 0 24 24"><rect x="6" y="6" width="4" height="12"/><rect x="14" y="6" width="4" height="12"/></svg>';
    }
}

function stopSession() {
    // Stop all timers
    clearInterval(elapsedInterval);
    clearInterval(countdownInterval);
    
    // Reset states
    isElapsedRunning = false;
    isCountdownRunning = false;
    isPaused = false;
    
    // Reset displays
    elapsedSeconds = 0;
    countdownSeconds = 0;
    totalCountdownSeconds = 0;
    
    updateElapsedDisplay();
    updateCountdownDisplay();
    
    // Reset progress ring
    document.getElementById('progressRing').style.strokeDashoffset = 508.9;
    
    // Reset button
    document.getElementById('playPauseBtn').innerHTML = '<svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>';
}

// To-do list functions
function addTask() {
    const input = document.getElementById('todoInput');
    const taskText = input.value.trim();
    
    if (!taskText) return;
    
    const li = document.createElement('li');
    const checkbox = document.createElement('input');
    checkbox.type = 'checkbox';
    checkbox.addEventListener('change', () => {
        li.classList.toggle('completed', checkbox.checked);
        updateProgress();
    });
    
    const span = document.createElement('span');
    span.className = 'task-text';
    span.textContent = taskText;
    
    li.appendChild(checkbox);
    li.appendChild(span);
    document.getElementById('todoList').appendChild(li);
    
    input.value = '';
    updateProgress();
}

function updateProgress() {
    const checkboxes = document.querySelectorAll('#todoList input[type="checkbox"]');
    const completed = Array.from(checkboxes).filter(cb => cb.checked).length;
    const total = checkboxes.length;
    const percentage = total > 0 ? (completed / total) * 100 : 0;
    
    document.getElementById('progress').style.width = percentage + '%';
}

// Notes functionality
function toggleNotes() {
    const modal = document.getElementById('notesModal');
    const isVisible = modal.style.display === 'block';
    modal.style.display = isVisible ? 'none' : 'block';
    
    if (!isVisible) {
        modal.focus();
    }
}

// Goal editing
document.getElementById('mainGoal').addEventListener('click', function() {
    const currentGoal = this.textContent;
    const newGoal = prompt('Enter your main goal for today:', currentGoal);
    if (newGoal && newGoal.trim()) {
        this.textContent = newGoal.trim();
    }
});

// Input handling
document.getElementById('todoInput').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        addTask();
    }
});

// Minutes/seconds input handling
document.getElementById('minutesInput').addEventListener('input', updateCountdownTime);
document.getElementById('secondsInput').addEventListener('input', updateCountdownTime);

function updateCountdownTime() {
    if (!isCountdownRunning) {
        const minutes = parseInt(document.getElementById('minutesInput').value) || 0;
        const seconds = parseInt(document.getElementById('secondsInput').value) || 0;
        document.getElementById('countdownDisplay').textContent = 
            `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }
}

// Auto-start elapsed timer when page loads
window.addEventListener('load', () => {
    startElapsedTimer();
    updateCountdownTime();
});

// Close notes when clicking outside
document.addEventListener('click', function(e) {
    const modal = document.getElementById('notesModal');
    const notesBtn = document.getElementById('notesBtn');
    
    if (modal.style.display === 'block' && 
        !modal.contains(e.target) && 
        !notesBtn.contains(e.target)) {
        modal.style.display = 'none';
    }
});
</script>
</body>
</html>