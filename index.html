<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Study Tracker</title>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&family=Homemade+Apple&display=swap');

    body {
        margin: 0;
        padding: 0;
        font-family: 'Poppins', sans-serif;
        background: url('background.png') no-repeat center center fixed;
        background-size: cover;
        color: white;
        height: 100vh;
        overflow: hidden;
    }

    /* Glass Panel */
    .container {
        position: absolute;
        top: 120px;
        left: 20px;
        display: flex;
        flex-direction: column;
        gap: 20px;
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(12px);
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 8px 32px rgba(0,0,0,0.2);
        width: 280px;
    }

    /* Timer */
    .timer {
        font-size: 2.5rem;
        font-weight: 700;
        text-align: center;
    }

    button {
        padding: 8px 12px;
        background: rgba(255, 255, 255, 0.2);
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        transition: background 0.2s;
    }
    button:hover {
        background: rgba(255, 255, 255, 0.35);
    }

    /* To-do */
    .todo ul {
        list-style: none;
        padding: 0;
        margin: 10px 0 0;
        max-height: 150px;
        overflow-y: auto;
    }
    .todo li {
        display: flex;
        align-items: center;
        background: rgba(255, 255, 255, 0.15);
        margin: 5px 0;
        padding: 6px 8px;
        border-radius: 4px;
        font-size: 0.9rem;
    }
    .todo input[type="checkbox"] {
        margin-right: 8px;
    }
    .todo label {
        flex: 1;
        cursor: pointer;
    }
    .todo label.done {
        text-decoration: line-through;
        opacity: 0.6;
    }

    /* Quotes box */
    .quote-box {
        position: absolute;
        top: 20px;
        right: 20px;
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(12px);
        padding: 15px;
        border-radius: 15px;
        box-shadow: 0 8px 32px rgba(0,0,0,0.2);
        width: 280px;
        font-size: 0.95rem;
        font-style: italic;
    }

    /* Main Goal */
    .main-goal {
        position: absolute;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        text-align: center;
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(12px);
        padding: 15px 25px;
        border-radius: 15px;
        box-shadow: 0 8px 32px rgba(0,0,0,0.2);
        width: 400px;
    }
    .goal-text {
        font-size: 1.2rem;
        font-weight: 500;
        cursor: pointer;
        color: #ddd;
    }
    .goal-text.active {
        color: white;
        font-weight: 600;
    }
    .goal-input {
        width: 100%;
        padding: 8px;
        border: none;
        border-radius: 8px;
        outline: none;
        font-size: 1rem;
    }
    .goal-progress {
        margin-top: 8px;
        height: 6px;
        background: rgba(255,255,255,0.2);
        border-radius: 3px;
        overflow: hidden;
    }
    .goal-progress-bar {
        height: 100%;
        width: 0%;
        background: limegreen;
        transition: width 0.3s ease;
    }

    /* Notepad */
    .notepad {
        display: none;
        position: absolute;
        top: 80px;
        right: 50%;
        transform: translateX(50%);
        width: 500px;
        height: 400px;
        background: #fdf6e3 url('https://i.imgur.com/EkSYE6K.png') repeat-y; /* pale yellow with ruled lines */
        background-size: cover;
        border: 2px solid #c2b280;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.4);
        padding: 20px;
        font-family: 'Homemade Apple', cursive;
        font-size: 1.2rem;
        resize: none;
        overflow-y: auto;
        z-index: 999;
    }
</style>
</head>
<body>

<!-- Main Goal -->
<div class="main-goal">
    <div id="goalText" class="goal-text">What's your main goal for today?</div>
    <div class="goal-progress">
        <div id="goalProgressBar" class="goal-progress-bar"></div>
    </div>
</div>

<!-- Timer + To-do Panel -->
<div class="container">
    <div class="timer" id="timer">00:00:00</div>
    <div style="display: flex; gap: 5px; justify-content: center;">
        <button onclick="toggleTimer()">Start / Pause</button>
        <button onclick="resetTimer()">Reset</button>
        <button onclick="switchMode()">Switch</button>
    </div>

    <div class="todo">
        <input type="text" id="todoInput" placeholder="Add a task...">
        <button onclick="addTodo()">Add</button>
        <ul id="todoList"></ul>
    </div>

    <button onclick="toggleNotepad()">Notes</button>
</div>

<!-- Quotes -->
<div class="quote-box" id="quoteBox"></div>

<!-- Notepad -->
<textarea id="notepad" class="notepad" placeholder="Write your notes here..."></textarea>

<script>
let timerInterval;
let seconds = 0;
let running = false;
let countdownMode = false;
let countdownStart = 25 * 60;

function updateTimerDisplay() {
    let displaySeconds = countdownMode ? countdownStart - seconds : seconds;
    if (displaySeconds < 0) displaySeconds = 0;
    let hrs = String(Math.floor(displaySeconds / 3600)).padStart(2, '0');
    let mins = String(Math.floor((displaySeconds % 3600) / 60)).padStart(2, '0');
    let secs = String(displaySeconds % 60).padStart(2, '0');
    document.getElementById('timer').textContent = `${hrs}:${mins}:${secs}`;
}
function toggleTimer() {
    if (running) {
        clearInterval(timerInterval);
    } else {
        timerInterval = setInterval(() => {
            seconds++;
            updateTimerDisplay();
        }, 1000);
    }
    running = !running;
}
function resetTimer() {
    clearInterval(timerInterval);
    seconds = 0;
    running = false;
    updateTimerDisplay();
}
function switchMode() {
    countdownMode = !countdownMode;
    seconds = 0;
    updateTimerDisplay();
}

// To-do with checkboxes
function addTodo() {
    const input = document.getElementById('todoInput');
    if (!input.value.trim()) return;

    const li = document.createElement('li');
    const checkbox = document.createElement('input');
    checkbox.type = 'checkbox';
    const label = document.createElement('label');
    label.textContent = input.value;

    checkbox.addEventListener('change', () => {
        label.classList.toggle('done', checkbox.checked);
        updateGoalProgress();
    });

    li.appendChild(checkbox);
    li.appendChild(label);
    document.getElementById('todoList').appendChild(li);
    input.value = '';
    updateGoalProgress();
}

// Quotes
const quotes = [
    "Don’t watch the clock; do what it does. Keep going.",
    "Success is the sum of small efforts repeated day in and day out.",
    "The future depends on what you do today.",
    "Push yourself, because no one else is going to do it for you.",
    "It always seems impossible until it’s done.",
    "Small progress is still progress."
];
document.getElementById('quoteBox').textContent = quotes[Math.floor(Math.random() * quotes.length)];

// Main Goal
const goalTextEl = document.getElementById('goalText');
goalTextEl.addEventListener('click', () => {
    const currentGoal = goalTextEl.classList.contains('active') ? goalTextEl.textContent : "";
    const input = document.createElement('input');
    input.type = 'text';
    input.className = 'goal-input';
    input.value = currentGoal === "What's your main goal for today?" ? "" : currentGoal;
    goalTextEl.replaceWith(input);
    input.focus();

    input.addEventListener('blur', () => {
        const newGoal = input.value.trim() || "What's your main goal for today?";
        goalTextEl.textContent = newGoal;
        goalTextEl.classList.toggle('active', newGoal !== "What's your main goal for today?");
        input.replaceWith(goalTextEl);
    });

    input.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') input.blur();
    });
});

// Goal Progress
function updateGoalProgress() {
    const checkboxes = document.querySelectorAll('#todoList input[type="checkbox"]');
    const checked = document.querySelectorAll('#todoList input[type="checkbox"]:checked');
    const progress = checkboxes.length ? (checked.length / checkboxes.length) * 100 : 0;
    document.getElementById('goalProgressBar').style.width = `${progress}%`;
}

// Notepad
function toggleNotepad() {
    const notepad = document.getElementById('notepad');
    if (notepad.style.display === 'block') {
        notepad.style.display = 'none';
    } else {
        notepad.style.display = 'block';
        notepad.focus();
    }
}

// Save notes
const notepadEl = document.getElementById('notepad');
notepadEl.value = localStorage.getItem('studyNotes') || "";
notepadEl.addEventListener('input', () => {
    localStorage.setItem('studyNotes', notepadEl.value);
});

updateTimerDisplay();
</script>

</body>
</html>
